{"ast":null,"code":"// src/pages/AuthCallback.jsx\nimport React,{useEffect,useState}from'react';import{Navigate,useLocation}from'react-router-dom';import{supabase}from'../config/supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthCallback=()=>{const[redirectTo,setRedirectTo]=useState(null);const location=useLocation();useEffect(()=>{// Recupera la sessione al caricamento della pagina\nconst handleAuthCallback=async()=>{try{// Controlla se siamo in un callback OAuth\nconst params=new URLSearchParams(location.hash.substring(1));const accessToken=params.get('access_token');const refreshToken=params.get('refresh_token');if(accessToken){// Elabora il callback OAuth\nconst{error}=await supabase.auth.setSession({access_token:accessToken,refresh_token:refreshToken});if(error){console.error('Errore nell\\'elaborazione del callback:',error);}}setRedirectTo('/');}catch(error){console.error('Errore nel callback di autenticazione:',error);setRedirectTo('/login');}};handleAuthCallback();},[location]);if(redirectTo){return/*#__PURE__*/_jsx(Navigate,{to:redirectTo});}// Mostra un semplice messaggio di caricamento durante l'elaborazione\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',flexDirection:'column',gap:'20px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Autenticazione in corso...\"})]});};export default AuthCallback;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useLocation","supabase","jsx","_jsx","jsxs","_jsxs","AuthCallback","redirectTo","setRedirectTo","location","handleAuthCallback","params","URLSearchParams","hash","substring","accessToken","get","refreshToken","error","auth","setSession","access_token","refresh_token","console","to","style","display","justifyContent","alignItems","height","flexDirection","gap","children","className"],"sources":["/Users/stefano/Desktop/LexygraphLab/frontend/src/pages/AuthCallback.jsx"],"sourcesContent":["// src/pages/AuthCallback.jsx\nimport React, { useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { supabase } from '../config/supabaseClient';\n\nconst AuthCallback = () => {\n  const [redirectTo, setRedirectTo] = useState(null);\n  const location = useLocation();\n\n  useEffect(() => {\n    // Recupera la sessione al caricamento della pagina\n    const handleAuthCallback = async () => {\n      try {\n        // Controlla se siamo in un callback OAuth\n        const params = new URLSearchParams(location.hash.substring(1));\n        const accessToken = params.get('access_token');\n        const refreshToken = params.get('refresh_token');\n        \n        if (accessToken) {\n          // Elabora il callback OAuth\n          const { error } = await supabase.auth.setSession({\n            access_token: accessToken,\n            refresh_token: refreshToken,\n          });\n          \n          if (error) {\n            console.error('Errore nell\\'elaborazione del callback:', error);\n          }\n        }\n        \n        setRedirectTo('/');\n      } catch (error) {\n        console.error('Errore nel callback di autenticazione:', error);\n        setRedirectTo('/login');\n      }\n    };\n\n    handleAuthCallback();\n  }, [location]);\n\n  if (redirectTo) {\n    return <Navigate to={redirectTo} />;\n  }\n\n  // Mostra un semplice messaggio di caricamento durante l'elaborazione\n  return (\n    <div style={{ \n      display: 'flex', \n      justifyContent: 'center', \n      alignItems: 'center', \n      height: '100vh',\n      flexDirection: 'column',\n      gap: '20px'\n    }}>\n      <div className=\"loading-spinner\"></div>\n      <p>Autenticazione in corso...</p>\n    </div>\n  );\n};\n\nexport default AuthCallback;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,QAAQ,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAAAW,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAa,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF;AACA,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACH,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC,CAC9D,KAAM,CAAAC,WAAW,CAAGJ,MAAM,CAACK,GAAG,CAAC,cAAc,CAAC,CAC9C,KAAM,CAAAC,YAAY,CAAGN,MAAM,CAACK,GAAG,CAAC,eAAe,CAAC,CAEhD,GAAID,WAAW,CAAE,CACf;AACA,KAAM,CAAEG,KAAM,CAAC,CAAG,KAAM,CAAAjB,QAAQ,CAACkB,IAAI,CAACC,UAAU,CAAC,CAC/CC,YAAY,CAAEN,WAAW,CACzBO,aAAa,CAAEL,YACjB,CAAC,CAAC,CAEF,GAAIC,KAAK,CAAE,CACTK,OAAO,CAACL,KAAK,CAAC,yCAAyC,CAAEA,KAAK,CAAC,CACjE,CACF,CAEAV,aAAa,CAAC,GAAG,CAAC,CACpB,CAAE,MAAOU,KAAK,CAAE,CACdK,OAAO,CAACL,KAAK,CAAC,wCAAwC,CAAEA,KAAK,CAAC,CAC9DV,aAAa,CAAC,QAAQ,CAAC,CACzB,CACF,CAAC,CAEDE,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,GAAIF,UAAU,CAAE,CACd,mBAAOJ,IAAA,CAACJ,QAAQ,EAACyB,EAAE,CAAEjB,UAAW,CAAE,CAAC,CACrC,CAEA;AACA,mBACEF,KAAA,QAAKoB,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,OAAO,CACfC,aAAa,CAAE,QAAQ,CACvBC,GAAG,CAAE,MACP,CAAE,CAAAC,QAAA,eACA7B,IAAA,QAAK8B,SAAS,CAAC,iBAAiB,CAAM,CAAC,cACvC9B,IAAA,MAAA6B,QAAA,CAAG,4BAA0B,CAAG,CAAC,EAC9B,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}