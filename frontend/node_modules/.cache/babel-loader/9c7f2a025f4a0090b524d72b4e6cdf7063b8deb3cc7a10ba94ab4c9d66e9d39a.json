{"ast":null,"code":"var _jsxFileName = \"/home/andreadimeglio/valis/src/pages/AuthCallback.jsx\",\n  _s = $RefreshSig$();\n// src/pages/AuthCallback.jsx\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../config/supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthCallback = () => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Gestisci il callback OAuth\n    const handleAuthCallback = async () => {\n      try {\n        // Supabase gestisce automaticamente il token nel callback\n        const {\n          data,\n          error\n        } = await supabase.auth.getSession();\n        if (error) {\n          console.error('Errore durante l\\'autenticazione OAuth:', error);\n          navigate('/login?error=' + encodeURIComponent(error.message));\n          return;\n        }\n        if (data.session) {\n          // Redirect alla dashboard dopo login con successo\n          navigate('/');\n        } else {\n          // Se non c'è sessione, torna al login\n          navigate('/login');\n        }\n      } catch (err) {\n        console.error('Errore durante la gestione callback:', err);\n        navigate('/login');\n      }\n    };\n    handleAuthCallback();\n  }, [navigate]);\n\n  // Mostra spinner durante il processo di autenticazione\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '20px',\n        color: 'var(--text-secondary)'\n      },\n      children: \"Completamento autenticazione in corso...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthCallback, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthCallback;\nexport default AuthCallback;\nvar _c;\n$RefreshReg$(_c, \"AuthCallback\");","map":{"version":3,"names":["React","useEffect","useNavigate","supabase","jsxDEV","_jsxDEV","AuthCallback","_s","navigate","handleAuthCallback","data","error","auth","getSession","console","encodeURIComponent","message","session","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","color","_c","$RefreshReg$"],"sources":["/home/andreadimeglio/valis/src/pages/AuthCallback.jsx"],"sourcesContent":["// src/pages/AuthCallback.jsx\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../config/supabaseClient';\n\nconst AuthCallback = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Gestisci il callback OAuth\n    const handleAuthCallback = async () => {\n      try {\n        // Supabase gestisce automaticamente il token nel callback\n        const { data, error } = await supabase.auth.getSession();\n        \n        if (error) {\n          console.error('Errore durante l\\'autenticazione OAuth:', error);\n          navigate('/login?error=' + encodeURIComponent(error.message));\n          return;\n        }\n        \n        if (data.session) {\n          // Redirect alla dashboard dopo login con successo\n          navigate('/');\n        } else {\n          // Se non c'è sessione, torna al login\n          navigate('/login');\n        }\n      } catch (err) {\n        console.error('Errore durante la gestione callback:', err);\n        navigate('/login');\n      }\n    };\n    \n    handleAuthCallback();\n  }, [navigate]);\n\n  // Mostra spinner durante il processo di autenticazione\n  return (\n    <div className=\"loading-container\">\n      <div className=\"loading-spinner\"></div>\n      <p style={{ marginTop: '20px', color: 'var(--text-secondary)' }}>\n        Completamento autenticazione in corso...\n      </p>\n    </div>\n  );\n};\n\nexport default AuthCallback;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd;IACA,MAAMQ,kBAAkB,GAAG,MAAAA,CAAA,KAAY;MACrC,IAAI;QACF;QACA,MAAM;UAAEC,IAAI;UAAEC;QAAM,CAAC,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAACC,UAAU,CAAC,CAAC;QAExD,IAAIF,KAAK,EAAE;UACTG,OAAO,CAACH,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;UAC/DH,QAAQ,CAAC,eAAe,GAAGO,kBAAkB,CAACJ,KAAK,CAACK,OAAO,CAAC,CAAC;UAC7D;QACF;QAEA,IAAIN,IAAI,CAACO,OAAO,EAAE;UAChB;UACAT,QAAQ,CAAC,GAAG,CAAC;QACf,CAAC,MAAM;UACL;UACAA,QAAQ,CAAC,QAAQ,CAAC;QACpB;MACF,CAAC,CAAC,OAAOU,GAAG,EAAE;QACZJ,OAAO,CAACH,KAAK,CAAC,sCAAsC,EAAEO,GAAG,CAAC;QAC1DV,QAAQ,CAAC,QAAQ,CAAC;MACpB;IACF,CAAC;IAEDC,kBAAkB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACD,QAAQ,CAAC,CAAC;;EAEd;EACA,oBACEH,OAAA;IAAKc,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAChCf,OAAA;MAAKc,SAAS,EAAC;IAAiB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACvCnB,OAAA;MAAGoB,KAAK,EAAE;QAAEC,SAAS,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAwB,CAAE;MAAAP,QAAA,EAAC;IAEjE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAEV,CAAC;AAACjB,EAAA,CAzCID,YAAY;EAAA,QACCJ,WAAW;AAAA;AAAA0B,EAAA,GADxBtB,YAAY;AA2ClB,eAAeA,YAAY;AAAC,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}